<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ‘‡éª°å­æ¸¸æˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        .left-container {
            width: 65%;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #fff;
            padding-bottom: 0px; /* ä¸ºæŒ‰é’®ç•™å‡ºç©ºé—´ */
        }
        .stats-container {
            width: 100%;
            height: auto;
            padding: 10px;
            box-sizing: border-box;
            background-color: #f9f9f9;
            border-bottom: 2px solid #ccc; /* åº•éƒ¨æ·»åŠ åˆ†å‰²çº¿ */
        }
        .stats-container h3 {
            text-align: center;
            margin: 0 0 10px 0;
            font-size: 14px
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            text-align: center;
        }
        .stats-grid2 {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            text-align: center;
        }
        .stats-item {
            font-size: 16px;
        }
        .dice-container {
            width: 100%;
            height: auto;
            display: grid; /* ä½¿ç”¨ grid å¸ƒå±€ */
            grid-template-areas: "dice1 dice2 dice3";
            grid-template-columns: 60px; /* è®¾ç½®ä¸€åˆ—å¸ƒå±€ */
            grid-template-rows: 60px 70px 0px; /* è®¾ç½®è‡ªåŠ¨è¡Œé«˜ */
            justify-content: center;
            align-items: center;
            gap: 0px; /* è®¾ç½®éª°å­ä¹‹é—´çš„é—´è· */
            perspective: 1000px;
            margin-bottom: 10px; /* ä¸è‡ªåŠ¨æ‘‡éª°å­å¤é€‰æ¡†çš„è·ç¦» */
            position: fixed; /* å›ºå®šå®šä½ */
            bottom: 0px; /* è·ç¦»é¡µé¢åº•éƒ¨ 80pxï¼ˆæŒ‰é’®é«˜åº¦ 60px + 10px é—´è·ï¼‰ */
            left: 30%; /* æ°´å¹³å±…ä¸­ */
            transform: translateX(-50%); /* æ°´å¹³å±…ä¸­ */
            z-index: 1000; /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
        }
        .dice {
            width: 42px;
            height: 42px;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(0deg) rotateY(0deg);
            background-color: white;
            margin: 10px;
        }
        
        #dice1 {
            grid-area: dice1; /* è®¾ç½®éª°å­1çš„ä½ç½® */
            justify-self: center; /* ä½¿éª°å­1é ä¸­ */
        }
        
        #dice2 {
            grid-area: dice2; /* è®¾ç½®éª°å­2çš„ä½ç½® */
            justify-self: end; /* ä½¿éª°å­2é å³ */
        }
        
        #dice3 {
            grid-area: dice3; /* è®¾ç½®éª°å­3çš„ä½ç½® */
            justify-self: start; /* ä½¿éª°å­3é å·¦ */
        }
        
        button {
            margin-top: 100px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            grid-column: span 3; /* æŒ‰é’®è·¨ä¸¤åˆ— */
            justify-self: center;
        }
        .dice .face {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #00bbd4;
            border: 0px solid #ccc;
            border-radius: 0px;
            font-size: 20px;
            font-weight: bold;
            color: white;
        }
        .dice .front { transform: translateZ(21px); }
        .dice .back { transform: rotateY(180deg) translateZ(21px); }
        .dice .left { transform: rotateY(-90deg) translateZ(21px); }
        .dice .right { transform: rotateY(90deg) translateZ(21px); }
        .dice .top { transform: rotateX(90deg) translateZ(21px); }
        .dice .bottom { transform: rotateX(-90deg) translateZ(21px); }

        @keyframes roll {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            100% { transform: rotateX(720deg) rotateY(720deg); }

        }
        .right-container {
            width: 50%;
            height: 100vh;
            background-color: black;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
            flex-wrap: wrap;
        }
        .record-container {
            width: 100%;
            height: calc(100vh - 60px);
            overflow-y: auto; /* åªå¢åŠ ç«–å‘æ»šåŠ¨æ¡ */
            font-size: 18px;  /* è°ƒæ•´å­—ä½“å¤§å°ä»¥é€‚åº”æ›´å¤šå†…å®¹ */
        }
        .record-item {
            margin-bottom: 10px;
            padding: 5px;
            display: block; /* æ”¹ä¸ºblockä»¥æ˜¾ç¤ºä¸ºå•è¡Œ */
            text-align: left; /* å·¦å¯¹é½ */
            white-space: nowrap; /* é˜²æ­¢æ¢è¡Œ */
        }
        .record-item.red { color: red; }
        .record-item.yellow { color: yellow; }
        .record-item.green { color: green; }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }

        .dice-image {
            width: 30px;
            height: 30px;
        }
        
        #rollButton {
            position: fixed; /* å›ºå®šåœ¨é¡µé¢åº•éƒ¨ */
            bottom: 5px; /* è·ç¦»é¡µé¢åº•éƒ¨ 20px */
            left: 30%; /* æ°´å¹³å±…ä¸­ */
            transform: translateX(-50%); /* æ°´å¹³å±…ä¸­ */
            width: 140px; /* æŒ‰é’®å®½åº¦ */
            height: 60px; /* æŒ‰é’®é«˜åº¦ */
            border-radius: 100px; /* åœ†è§’ */
            background-color: rgb(255, 193, 7); /* æŒ‰é’®èƒŒæ™¯è‰² */
            font-size: 16px; /* å­—ä½“å¤§å° */
            cursor: pointer; /* é¼ æ ‡æŒ‡é’ˆæ ·å¼ */
            z-index: 1000; /* ç¡®ä¿æŒ‰é’®åœ¨æœ€ä¸Šå±‚ */
        }

        /* å¼¹çª—æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0; /* å¼¹çª—é å·¦å¯¹é½ */
            top: 0;
            width: 46%;
            height: 100%;
            background-color: transparent; /* å»æ‰è’™ç‰ˆ */
        }

        .modal-content {
            background-color: #fff;
            margin: 15% 0 0 0px; /* å¼¹çª—é å·¦å¯¹é½ï¼Œè·ç¦»é¡¶éƒ¨15%ï¼Œè·ç¦»å·¦ä¾§0px */
            padding: 20px;
            border: 1px solid #888;
            width: 100%;
            text-align: center;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* æ·»åŠ é˜´å½±ä»¥å¢å¼ºè§†è§‰æ•ˆæœ */
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: black;
        }

        /* æ•°å­—æŒ‰é”®æ ·å¼ */
        .number-buttons {
            display: flex;
            flex-direction: column; /* è®¾ç½®ä¸ºå‚ç›´æ’åˆ— */
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .number-row {
            display: flex;
            justify-content: space-around;
            margin-bottom: 10px; /* è¡Œä¸è¡Œä¹‹é—´çš„é—´è· */
        }

        .number-button {
            width: 50px; /* åŠ å¤§æŒ‰é’®å®½åº¦ */
            height: 50px; /* åŠ å¤§æŒ‰é’®é«˜åº¦ */
            text-align: center;
            background-color: #00bbd4;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 24px; /* åŠ å¤§å­—ä½“å¤§å° */
            cursor: pointer;
        }

        .number-button:hover {
            background-color: #0097a7;
        }

        /* è¾“å…¥æ¡†å®¹å™¨ */
        .input-container {
            position: relative;
            width: 100%;
            margin-bottom: 20px;
        }

        /* æ”¾å¤§è¾“å…¥æ¡† */
        #diceInput {
            width: 80%; /* è¾“å…¥æ¡†å®½åº¦ */
            padding: 10px; /* å†…è¾¹è· */
            font-size: 18px; /* å­—ä½“å¤§å° */
            padding-right: 40px; /* ä¸ºæ¸…ç©ºå›¾æ ‡ç•™å‡ºç©ºé—´ */
        }

        /* æ¸…ç©ºå›¾æ ‡ */
        .clear-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 40px;
            color: #aaa;
        }

        .clear-icon:hover {
            color: #000;
        }
        .missing-numbers {
            text-align: center; /* å±…ä¸­æ˜¾ç¤º */
            font-size: 18px; /* å­—ä½“å¤§å° */
            margin: 10px 0; /* ä¸Šä¸‹é—´è· */
            padding: 0; /* å»æ‰å†…è¾¹è· */
            border: none; /* å»æ‰è¾¹æ¡† */
        }
        
        /* æ–°å¢ï¼šæŒ‰é’®å®¹å™¨æ ·å¼ */
        .button-container {
            display: inline-block;
            justify-content: center;
            gap: 10px;
            margin-top: -20px;
            width: 100%;
        }
        
        .record-left, .record-right {
            display: inline; /* æ”¹ä¸ºå†…è”æ˜¾ç¤º */
        }
        
        .control-button {
            position: fixed;
            left: 98%;
            transform: translateX(-50%);
            z-index: 1000;
            background-color: #f0f0f0;
            border: none;
            padding: 5px 8px;
            border-radius: 5px;
            cursor: pointer;
        }

        #muteButton {
            top: 10px;
        }

        #clearButton {
            top: 100px;
        }
    </style>
</head>
<body>
    <div class="left-container">
        <div class="stats-container">
            <h3>æœ€è¿‘10æ¬¡ç»“æœç»Ÿè®¡</h3>
            <div class="stats-grid" id="statsGrid">
                <!-- ç»Ÿè®¡ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
            <!-- åˆ†å‰²çº¿ -->
            <hr class="stats-divider">
            
            <h3>æœ€è¿‘2æ¬¡æœªå‡ºç°çš„ç‚¹æ•°</h3>
            <div class="stats-grid2" id="missingStatsGrid">
                <!-- æœ€è¿‘2æ¬¡æœªå‡ºç°çš„ç‚¹æ•°å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
            <!-- åˆ†å‰²çº¿ -->
            <hr class="stats-divider">
            
            <!-- è¿ç»­Næ¬¡æœªå‡ºç°ç»Ÿè®¡æ  -->
            <h3>è¿ç»­Næ¬¡æœªå‡ºç°</h3>
            <div class="stats-grid" id="continuousMissingStatsGrid">
                <!-- è¿ç»­æœªå‡ºç°çš„ç‚¹æ•°å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
            <!-- åˆ†å‰²çº¿ -->
            <hr class="stats-divider">
            
            <!-- åŒå‹è¿ç»­Næ¬¡æœªå‡ºç°ç»Ÿè®¡æ  -->
            <h3>åŒå‹è¿ç»­Næ¬¡æœªå‡ºç°</h3>
            <div class="stats-grid" id="doubleTypeMissingStatsGrid">
                <!-- åŒå‹è¿ç»­æœªå‡ºç°çš„ç‚¹æ•°å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
        </div>

        <!-- éª°å­å®¹å™¨ -->
        <div class="dice-container">
            <div class="dice" id="dice1">
                <div class="face front">1</div>
                <div class="face back">6</div>
                <div class="face left">4</div>
                <div class="face right">3</div>
                <div class="face top">2</div>
                <div class="face bottom">5</div>
            </div>
            <div class="dice" id="dice2">
                <div class="face front">1</div>
                <div class="face back">6</div>
                <div class="face left">4</div>
                <div class="face right">3</div>
                <div class="face top">2</div>
                <div class="face bottom">5</div>
            </div>
            <div class="dice" id="dice3">
                <div class="face front">1</div>
                <div class="face back">6</div>
                <div class="face left">4</div>
                <div class="face right">3</div>
                <div class="face top">2</div>
                <div class="face bottom">5</div>
            </div>
        </div>
    </div>
    <button id="rollButton">å¼€å§‹æ‘‡éª°å­</button>
    </div>
    <div class="right-container">
        <div class="record-container" id="recordContainer">
        </div>
        <button id="refreshButton" class="control-button">ğŸ”„ åˆ·æ–°</button>
        <button id="clearButton" class="control-button">ğŸ—‘ï¸ æ¸…ç©º</button>
        </div>
            <!-- è®°å½•å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
        </div>
    </div>

    <!-- æ‰‹åŠ¨è¾“å…¥ç‚¹æ•°çš„å¼¹çª— -->
    <div id="inputModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <button id="deleteLastRecord" style="width: 50%; background: none; border: none; color: blue; font-size: 14px; text-align: center; margin-bottom: 0px; padding: 5px;">åˆ é™¤</button>
            <h3 style="font-size: 16px;">è¯·è¾“å…¥ä¸‰ä¸ªéª°å­çš„ç‚¹æ•°</h3> <!-- ç¼©å°æ ‡é¢˜å­—ä½“å¤§å° -->
            <!-- è¾“å…¥æ¡†å®¹å™¨ -->
            <div class="input-container">
                <input type="text" id="diceInput" placeholder="ä¾‹å¦‚ï¼š123" maxlength="3" style="width: 60%;"> <!-- ç¼©çŸ­è¾“å…¥æ¡†å®½åº¦ -->
                <!-- æ¸…ç©ºå›¾æ ‡ -->
                <span class="clear-icon" id="clearInput">Ã—</span>
            </div>
            <!-- æ•°å­—æŒ‰é”® -->
            <div class="number-buttons">
                <div class="number-row">
                    <button class="number-button" data-value="1">1</button>
                    <button class="number-button" data-value="2">2</button>
                    <button class="number-button" data-value="3">3</button>
                </div>
                <div class="number-row">
                    <button class="number-button" data-value="4">4</button>
                    <button class="number-button" data-value="5">5</button>
                    <button class="number-button" data-value="6">6</button>
                </div>
            </div>
            <button id="confirmInput" style="width: 100px; height: 50px;">ç¡®å®š</button>
        </div>
    </div>

    <script>
        const dice1 = document.getElementById('dice1');
        const dice2 = document.getElementById('dice2');
        const dice3 = document.getElementById('dice3');
        const rollButton = document.getElementById('rollButton');
        const recordContainer = document.getElementById('recordContainer');
        const statsGrid = document.getElementById('statsGrid');
        const missingStatsGrid = document.getElementById('missingStatsGrid');
        const doubleTypeMissingStatsGrid = document.getElementById('doubleTypeMissingStatsGrid');

        // æ‰‹åŠ¨è¾“å…¥ç‚¹æ•°çš„å¼¹çª—ç›¸å…³å…ƒç´ 
        const inputModal = document.getElementById('inputModal');
        const diceInput = document.getElementById('diceInput');
        const confirmInputButton = document.getElementById('confirmInput');
        const closeModalButton = document.querySelector('.close');
        const numberButtons = document.querySelectorAll('.number-button');
        const clearInputButton = document.getElementById('clearInput');

        // æ‰“å¼€æ‰‹åŠ¨è¾“å…¥ç‚¹æ•°çš„å¼¹çª—
        rollButton.addEventListener('click', () => {
            inputModal.style.display = 'block';
        });

        // å…³é—­å¼¹çª—
        closeModalButton.addEventListener('click', () => {
            inputModal.style.display = 'none';
        });

        // æ•°å­—æŒ‰é”®ç‚¹å‡»äº‹ä»¶
        numberButtons.forEach(button => {
            button.addEventListener('click', () => {
                const value = button.getAttribute('data-value');
                if (diceInput.value.length < 3) {
                    diceInput.value += value; // å°†æ•°å­—æ·»åŠ åˆ°è¾“å…¥æ¡†
                }
            });
        });

        // æ¸…ç©ºè¾“å…¥æ¡†å†…å®¹
        clearInputButton.addEventListener('click', () => {
            diceInput.value = ''; // æ¸…ç©ºè¾“å…¥æ¡†
        });

        // ç¡®è®¤è¾“å…¥çš„ç‚¹æ•°
        confirmInputButton.addEventListener('click', () => {
            const inputValue = diceInput.value.trim();
            if (inputValue.length === 3 && /^\d{3}$/.test(inputValue)) {
                const value1 = parseInt(inputValue[0], 10);
                const value2 = parseInt(inputValue[1], 10);
                const value3 = parseInt(inputValue[2], 10);

                if (value1 >= 1 && value1 <= 6 && value2 >= 1 && value2 <= 6 && value3 >= 1 && value3 <= 6) {
                    updateDice(dice1, value1);
                    updateDice(dice2, value2);
                    updateDice(dice3, value3);

                    const sum = value1 + value2 + value3;
                    const size = getSize(sum);
                    const isTripleResult = isTriple(value1, value2, value3);
                    const oddEven = getOddEven(sum);
                    const diceType = getDiceType(value1, value2, value3);

                    const record = {
                        dice1: value1,
                        dice2: value2,
                        dice3: value3,
                        sum: sum,
                        size: size,
                        isTriple: isTripleResult,
                        oddEven: oddEven,
                        diceType: diceType
                    };

                    saveRecord(record);
                    displayRecords();
                    updateStats();

                    diceInput.value = ''; // æ¸…ç©ºè¾“å…¥æ¡†
                    inputModal.style.display = 'none'; // å…³é—­å¼¹çª—
                } else {
                    alert('è¯·è¾“å…¥1åˆ°6ä¹‹é—´çš„æœ‰æ•ˆç‚¹æ•°ï¼');
                }
            } else {
                alert('è¯·è¾“å…¥3ä¸ªæ•°å­—ï¼ˆä¾‹å¦‚ï¼š123ï¼‰ï¼');
            }
        });
        
        // ç›‘å¬æ•´ä¸ªæ–‡æ¡£çš„ç‚¹å‡»äº‹ä»¶
        document.addEventListener('click', (event) => {
            const modal = document.getElementById('inputModal');
            const modalContent = document.querySelector('.modal-content');

            // æ£€æŸ¥ç‚¹å‡»çš„ç›®æ ‡æ˜¯å¦åœ¨å¼¹çª—ä¹‹å¤–
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        function updateDice(diceElement, value) {
            const faces = diceElement.querySelectorAll('.face');
            
            // æ›´æ–°æ¯ä¸€é¢çš„æ•°å­—
            faces[0].textContent = value; // å‰é¢
            faces[1].textContent = 7 - value; // åé¢ï¼ˆéª°å­å¯¹é¢ä¹‹å’Œä¸º7ï¼‰
            faces[2].textContent = value === 2 ? 3 : value === 5 ? 4 : value; // å·¦é¢
            faces[3].textContent = value === 3 ? 4 : value === 4 ? 3 : value; // å³é¢
            faces[4].textContent = value === 6 ? 2 : value === 1 ? 5 : value; // ä¸Šé¢
            faces[5].textContent = value === 1 ? 5 : value === 6 ? 2 : value; // ä¸‹é¢
        }
    
        function getSize(sum) {
            return sum > 10 ? 'å¤§' : 'å°';
        }
    
        function isTriple(dice1, dice2, dice3) {
            return dice1 === dice2 && dice2 === dice3;
        }
        
        // åˆ¤æ–­å•åŒ
        function getOddEven(sum) {
            return sum % 2 === 0 ? 'åŒ' : 'å•';
        }
        
        // åˆ¤æ–­å•å››/çº¯å•/åŒå‹
        function getDiceType(dice1, dice2, dice3) {
            const counts = {};
            counts[dice1] = (counts[dice1] || 0) + 1;
            counts[dice2] = (counts[dice2] || 0) + 1;
            counts[dice3] = (counts[dice3] || 0) + 1;
            
            const values = Object.values(counts);
            
            if (values.includes(3)) {
                return ''; // ä¸‰ä¸ªç›¸åŒä¸æ˜¾ç¤ºç±»å‹
            } else if (values.includes(2)) {
                return 'åŒå‹'; // æœ‰ä¸¤ä¸ªç›¸åŒ
            } else {
                // åˆ¤æ–­æ˜¯å¦ä¸ºå•å››ï¼ˆæ£€æŸ¥æ˜¯å¦å±äºå››è”é€‰é¡¹ï¼‰
                const uniqueValues = [...new Set([dice1, dice2, dice3])].sort();
                
                // å››è”é€‰é¡¹çš„æ•°å­—ç»„åˆ
                const siLianGroups = [
                    [1, 2, 3], // 123ç»„åˆ
                    [2, 3, 4], // 234ç»„åˆ
                    [3, 4, 5], // 345ç»„åˆ
                    [4, 5, 6], // 456ç»„åˆ
                    [1, 2, 4], // 456ç»„åˆ
                    [1, 3, 4], // 456ç»„åˆ
                    [2, 3, 5], // 456ç»„åˆ
                    [2, 4, 5], // 456ç»„åˆ
                    [2, 3, 6], // 456ç»„åˆ
                    [2, 5, 6], // 456ç»„åˆ
                    [3, 5, 6], // 456ç»„åˆ
                    [3, 4, 6], // 456ç»„åˆ
                ];
                
                // æ£€æŸ¥å½“å‰ç‚¹æ•°æ˜¯å¦æ˜¯ä»»ä¸€å››è”ç»„åˆçš„å­é›†
                const isSiLian = siLianGroups.some(group => {
                    return uniqueValues.every(val => group.includes(val));
                });
                
                return isSiLian ? 'å•å››' : 'çº¯å•';
            }
        }
    
        function saveRecord(record) {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            records.push(record);
            localStorage.setItem('diceRecords', JSON.stringify(records));
        }
    
        function displayRecords() {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            recordContainer.innerHTML = '';
            
            // æœ€å¤šæ˜¾ç¤º100æ¡è®°å½•
            const displayRecords = records.slice(-100);
            
            displayRecords.forEach((record) => {
                const sortedDice = [record.dice1, record.dice2, record.dice3].sort((a, b) => a - b);
                const recordItem = document.createElement('div');
                recordItem.className = `record-item ${record.isTriple ? 'green' : record.size === 'å¤§' ? 'red' : 'yellow'}`;
                
                // åˆ›å»ºå•è¡Œæ–‡æœ¬å†…å®¹
                let recordText;
                
                if (record.isTriple) {
                    // å¦‚æœæ˜¯ä¸‰ä¸ªç›¸åŒï¼Œåªæ˜¾ç¤ºç‚¹æ•°
                    recordText = `${sortedDice[0]}${sortedDice[1]}${sortedDice[2]}`;
                } else {
                    // å¦‚æœä¸æ˜¯ä¸‰ä¸ªç›¸åŒï¼Œæ˜¾ç¤ºå®Œæ•´ä¿¡æ¯
                    recordText = `${sortedDice[0]}${sortedDice[1]}${sortedDice[2]} ${record.sum} ${record.size} ${record.oddEven} ${record.diceType}`;
                }
                
                recordItem.textContent = recordText;
                recordContainer.appendChild(recordItem);
            });
            
            // é»˜è®¤æ»šåŠ¨åˆ°åº•éƒ¨æ˜¾ç¤ºæœ€æ–°è®°å½•
            recordContainer.scrollTop = recordContainer.scrollHeight;
        }

        // åˆå§‹åŒ–æ˜¾ç¤º
        displayRecords();
    
        function updateStats() {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            const recentRecords = records.slice(-10); // æœ€è¿‘10æ¬¡ç»“æœ
            const count = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 };

            // ç»Ÿè®¡æœ€è¿‘10æ¬¡ç»“æœä¸­æ¯ä¸ªç‚¹æ•°å‡ºç°çš„æ¬¡æ•°
            recentRecords.forEach(record => {
                count[record.dice1]++;
                count[record.dice2]++;
                count[record.dice3]++;
            });

            // æ›´æ–°æœ€è¿‘10æ¬¡ç»“æœç»Ÿè®¡
            statsGrid.innerHTML = `
                <div class="stats-item">1ï¸âƒ£: ${count[1]}</div>
                <div class="stats-item">2ï¸âƒ£: ${count[2]}</div>
                <div class="stats-item">3ï¸âƒ£: ${count[3]}</div>
                <div class="stats-item">4ï¸âƒ£: ${count[4]}</div>
                <div class="stats-item">5ï¸âƒ£: ${count[5]}</div>
                <div class="stats-item">6ï¸âƒ£: ${count[6]}</div>
            `;

            // è®¡ç®—æœ€è¿‘2æ¬¡æœªå‡ºç°çš„ç‚¹æ•°
            const lastTwoRecords = records.slice(-2);
            const appearedNumbers = new Set();
            lastTwoRecords.forEach(record => {
                appearedNumbers.add(record.dice1);
                appearedNumbers.add(record.dice2);
                appearedNumbers.add(record.dice3);
            });

            const allNumbers = new Set([1, 2, 3, 4, 5, 6]);
            const missingNumbers = [...allNumbers].filter(num => !appearedNumbers.has(num));

            // æ›´æ–°æœ€è¿‘2æ¬¡æœªå‡ºç°çš„ç‚¹æ•°æ˜¾ç¤ºï¼Œåªæ˜¾ç¤ºæœªå‡ºç°çš„ç‚¹æ•°ï¼Œå¹¶ç”¨ä¸¤ä¸ªç©ºæ ¼éš”å¼€
            missingStatsGrid.innerHTML = `
                <div class="missing-numbers">
                    ${missingNumbers.join('  ')}
                </div>
            `;

            // è®¡ç®—æœ€è¿‘10æœŸå†…è¿ç»­æœªå‡ºç°çš„æ¬¡æ•°ï¼ˆåŒ…å«æœ€æ–°ä¸€æœŸï¼‰
            const continuousMissingCounts = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 };

            // ä»æœ€æ–°è®°å½•å¼€å§‹å€’åºéå†
            for (let num = 1; num <= 6; num++) {
                let continuousCount = 0;
                for (let i = recentRecords.length - 1; i >= 0; i--) {
                    const record = recentRecords[i];
                    const currentNumbers = new Set([record.dice1, record.dice2, record.dice3]);

                    if (!currentNumbers.has(num)) {
                        continuousCount++; // å¦‚æœæœªå‡ºç°ï¼Œè®¡æ•°åŠ 1
                    } else {
                        break; // å¦‚æœå‡ºç°ï¼Œåœæ­¢è®¡æ•°
                    }
                }
                continuousMissingCounts[num] = continuousCount;
            }

            // æ›´æ–°è¿ç»­Næ¬¡æœªå‡ºç°çš„ç‚¹æ•°æ˜¾ç¤º
            const continuousMissingStatsGrid = document.getElementById('continuousMissingStatsGrid');
            continuousMissingStatsGrid.innerHTML = `
                <div class="stats-item">1ï¸âƒ£: ${continuousMissingCounts[1]}</div>
                <div class="stats-item">2ï¸âƒ£: ${continuousMissingCounts[2]}</div>
                <div class="stats-item">3ï¸âƒ£: ${continuousMissingCounts[3]}</div>
                <div class="stats-item">4ï¸âƒ£: ${continuousMissingCounts[4]}</div>
                <div class="stats-item">5ï¸âƒ£: ${continuousMissingCounts[5]}</div>
                <div class="stats-item">6ï¸âƒ£: ${continuousMissingCounts[6]}</div>
            `;
            
            // è®¡ç®—åŒå‹è¿ç»­æœªå‡ºç°çš„æ¬¡æ•°ï¼ˆæ’é™¤ä¸‰ä¸ªç›¸åŒçš„æƒ…å†µï¼‰
            const doubleTypeMissingCounts = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 };
            for (let num = 1; num <= 6; num++) {
                let found = false;
                let count = 0;
                for (let i = records.length - 1; i >= 0; i--) {
                    const record = records[i];
                    const diceValues = [record.dice1, record.dice2, record.dice3];
                    
                    // æ£€æŸ¥æ˜¯å¦æ˜¯å½“å‰æ•°å­—çš„åŒå‹ï¼ˆæœ‰ä¸¤ä¸ªå½“å‰æ•°å­—ä¸”ä¸æ˜¯ä¸‰ä¸ªç›¸åŒï¼‰
                    const countNum = diceValues.filter(v => v === num).length;
                    const isCurrentNumDoubleType = countNum === 2; // å¿…é¡»æ˜¯æ°å¥½ä¸¤ä¸ª
                    
                    if (isCurrentNumDoubleType) {
                        found = true;
                        break;
                    }
                    count++;
                }
                doubleTypeMissingCounts[num] = found ? count : records.length;
            }
            
            doubleTypeMissingStatsGrid.innerHTML = `
                <div class="stats-item">1ï¸âƒ£: ${doubleTypeMissingCounts[1]}</div>
                <div class="stats-item">2ï¸âƒ£: ${doubleTypeMissingCounts[2]}</div>
                <div class="stats-item">3ï¸âƒ£: ${doubleTypeMissingCounts[3]}</div>
                <div class="stats-item">4ï¸âƒ£: ${doubleTypeMissingCounts[4]}</div>
                <div class="stats-item">5ï¸âƒ£: ${doubleTypeMissingCounts[5]}</div>
                <div class="stats-item">6ï¸âƒ£: ${doubleTypeMissingCounts[6]}</div>
            `;
        }
        displayRecords();
        updateStats();
        
        // è·å–åˆ é™¤æŒ‰é’®
        const deleteLastRecordButton = document.getElementById('deleteLastRecord');

        // åˆ é™¤æœ€æ–°ä¸€æ¬¡è®°å½•çš„å‡½æ•°
        function deleteLastRecord() {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            if (records.length > 0) {
                records.pop(); // åˆ é™¤æœ€åä¸€æ¡è®°å½•
                localStorage.setItem('diceRecords', JSON.stringify(records));
                displayRecords(); // åˆ·æ–°è®°å½•æ˜¾ç¤º
                updateStats(); // åˆ·æ–°ç»Ÿè®¡æ˜¾ç¤º
            }    
        }

        // ä¸ºåˆ é™¤æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
        deleteLastRecordButton.addEventListener('click', deleteLastRecord);
        
        // è·å–åˆ·æ–°æŒ‰é’®
        const refreshButton = document.getElementById('refreshButton');
        
        // åˆ·æ–°é¡µé¢
        refreshButton.addEventListener('click', () => {
            location.reload();
        });
        
        // è·å–æ¸…ç©ºæŒ‰é’®
        const clearButton = document.getElementById('clearButton');
        
        // æ¸…ç©ºæ‰€æœ‰è®°å½•
        clearButton.addEventListener('click', () => {
            localStorage.removeItem('diceRecords');
            displayRecords();
            updateStats();
        });
    </script>
</body>
</html>
