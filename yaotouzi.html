<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>摇骰子游戏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        .left-container {
            width: 70%;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #fff;
            padding-bottom: 0px; /* 为按钮留出空间 */
        }
        .stats-container {
            width: 100%;
            height: auto;
            padding: 10px;
            box-sizing: border-box;
            background-color: #f9f9f9;
            border-bottom: 2px solid #ccc;
        }
        .stats-container h3 {
            text-align: center;
            margin: 0 0 10px 0;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            text-align: center;
        }
        .stats-item {
            font-size: 20px;
        }
        .balance-container {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            background-color: #f9f9f9;
            border-bottom: 2px solid #ccc;
            display: flex;
            flex-direction: column; /* 垂直排列 */
            gap: 5px; /* 设置行间距 */
        }
        .balance-info {
            display: flex;
            align-items: center; /* 剩余金额和下注按钮水平对齐 */
            gap: 10px; /* 设置间距 */
        }

        .balance-container span {
            font-size: 14px;
            font-weight: normal;
        }

        #balanceAmount {
            color: #00bbd4;
            font-size: 18px;
            font-weight: lighter;
        }
        .dice-container {
            width: 100%;
            height: auto;
            display: grid; /* 使用 grid 布局 */
            grid-template-areas: "dice1 dice1 dice1"
                                "dice2 . dice3";
            grid-template-columns: 60px 20px; /* 设置两列布局 */
            grid-template-rows: 60px 70px 0px; /* 设置自动行高 */
            justify-content: center;
            align-items: center;
            gap: 0px; /* 设置骰子之间的间距 */
            perspective: 1000px;
            margin-bottom: 10px; /* 与自动摇骰子复选框的距离 */
            position: fixed; /* 固定定位 */
            bottom: 100px; /* 距离页面底部 80px（按钮高度 60px + 10px 间距） */
            left: 30%; /* 水平居中 */
            transform: translateX(-50%); /* 水平居中 */
            z-index: 1000; /* 确保在最上层 */
        }
        .auto-roll-container {
            margin-top: 10px; /* 与骰子的距离 */
            display: flex;
            align-items: center;
            gap: 10px;
            position: fixed; /* 固定定位 */
            bottom: 80px; /* 距离页面底部 60px（按钮高度 60px） */
            left: 30%; /* 水平居中 */
            transform: translateX(-50%); /* 水平居中 */
            z-index: 1000; /* 确保在最上层 */
        }
        .auto-roll-container input[type="number"] {
            width: 60px;
            padding: 5px;
            font-size: 16px;
        }
        
        .dice {
            width: 42px;
            height: 42px;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(0deg) rotateY(0deg);
            background-color: white;
            margin: 10px;
        }
        
        #dice1 {
            grid-area: dice1; /* 设置骰子1的位置 */
            justify-self: center; /* 使骰子1靠中 */
        }
        
        #dice2 {
            grid-area: dice2; /* 设置骰子2的位置 */
            justify-self: end; /* 使骰子2靠右 */
        }
        
        #dice3 {
            grid-area: dice3; /* 设置骰子3的位置 */
            justify-self: start; /* 使骰子3靠左 */
        }
        
        button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            grid-column: span 3; /* 按钮跨两列 */
            justify-self: center;
        }
        .dice .face {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #00bbd4;
            border: 0px solid #ccc;
            border-radius: 0px;
            font-size: 20px;
            font-weight: bold;
            color: white;
        }
        .dice .front { transform: translateZ(21px); }
        .dice .back { transform: rotateY(180deg) translateZ(21px); }
        .dice .left { transform: rotateY(-90deg) translateZ(21px); }
        .dice .right { transform: rotateY(90deg) translateZ(21px); }
        .dice .top { transform: rotateX(90deg) translateZ(21px); }
        .dice .bottom { transform: rotateX(-90deg) translateZ(21px); }

        @keyframes roll {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            100% { transform: rotateX(720deg) rotateY(720deg); }

        }
        .right-container {
            width: 50%;
            height: 100vh;
            background-color: black;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
        }
        .record-container {
            width: 100%;
            height: calc(100vh - 60px);
            overflow-y: auto; /* 只增加竖向滚动条 */
            font-size: 24px;  /* 保持原来的字体大小 */
        }
        .record-item {
            margin-bottom: 10px;
            padding: 5px;
        }
        .record-item.red { color: red; }
        .record-item.yellow { color: yellow; }
        .record-item.green { color: green; }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }

        .dice-image {
            width: 30px;
            height: 30px;
        }
        
        #rollButton {
            position: fixed; /* 固定在页面底部 */
            bottom: 5px; /* 距离页面底部 20px */
            left: 30%; /* 水平居中 */
            transform: translateX(-50%); /* 水平居中 */
            width: 140px; /* 按钮宽度 */
            height: 60px; /* 按钮高度 */
            border-radius: 100px; /* 圆角 */
            background-color: rgb(255, 193, 7); /* 按钮背景色 */
            font-size: 16px; /* 字体大小 */
            cursor: pointer; /* 鼠标指针样式 */
            z-index: 1000; /* 确保按钮在最上层 */
        }
        /* 下注按钮样式 */
        #betButton {
            margin-left: 5px;
            margin-top: 0px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            background-color: #00bbd4;
            color: white;
            border: none;
            border-radius: 5px;
        }

        /* 弹窗样式 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 300px;
            text-align: center;
            border-radius: 10px;
        }
        
        /* 弹窗标题样式 */
        .modal-content h3 {
            font-size: 16px; /* 字体大小设置为 14px */
            font-weight: normal /* 字体粗细设置为 light */
            margin: 10px 0; /* 调整标题的上下间距 */
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: black;
        }

        .dice-options {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .dice-option {
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            background-color: white;
            border: 2px solid #00bbd4;
            color: black;
            border-radius: 5px;
            cursor: pointer;
        }

        .dice-option.selected {
            background-color: #00bbd4;
            color: #fff;
        }

        #confirmBet, #cancelBet {
            margin: 20px;
            padding: 10px 30px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
        }

        #confirmBet {
            background-color: #00bbd4;
            color: white;
        }

        #cancelBet {
            color: black;
        }
        #balanceAmount {
            color: #00bbd4; /* 金额数字的颜色 */
            font-size: 20px; /* 字体大小 */
            font-weight: bold; /* 字体加粗 */
        }

        /* 下注信息样式 */
        #betInfo {
            display: flex;
            flex-direction: column;
            gap: 8px; /* 设置行间距 */
            font-size: 14px;
            color: black;
            text-align: left; /* 靠左对齐 */
        }
    </style>
</head>
<body>
    <div class="left-container">
        <div class="stats-container">
            <h3>最近10次结果统计</h3>
            <div class="stats-grid" id="statsGrid">
                <!-- 统计结果将显示在这里 -->
            </div>
        </div>
        <div class="balance-container">
            <div class="balance-info">
                <span>剩余金额：</span>
                <div id="balanceAmount">2000</div>
                <button id="betButton">下注</button>
            </div>
            <div id="betInfo">
                <div id="betPointsInfo"></div> <!-- 点数下注信息 -->
                <div id="betSizeInfo"></div>   <!-- 大小下注信息 -->
                <div id="betQuadInfo"></div>   <!-- 四联下注信息 -->
                <div id="betTotalResultInfo"></div> <!-- 总的输赢结果 -->
            </div>
        </div>
        
        <!-- 弹窗结构 -->
        <!-- 在弹窗结构中增加四联选项 -->
        <div id="betModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>选择下注点数</h3>
                <div class="dice-options" id="pointOptions">
                    <div class="dice-option" data-value="1">1</div>
                    <div class="dice-option" data-value="2">2</div>
                    <div class="dice-option" data-value="3">3</div>
                    <div class="dice-option" data-value="4">4</div>
                    <div class="dice-option" data-value="5">5</div>
                    <div class="dice-option" data-value="6">6</div>
                </div>
                <h3>选择下注大小</h3>
                <div class="dice-options" id="sizeOptions">
                    <div class="dice-option" data-value="大">大</div>
                    <div class="dice-option" data-value="小">小</div>
                </div>
                <h3>选择下注四联</h3>
                <div class="dice-options" id="quadOptions">
                    <div class="dice-option" data-value="6543">6543</div>
                    <div class="dice-option" data-value="6532">6532</div>
                    <div class="dice-option" data-value="5432">5432</div>
                    <div class="dice-option" data-value="4321">4321</div>
                </div>
                <button id="confirmBet">确定</button>
                <button id="cancelBet">取消</button>
            </div>
        </div>
        <div class="dice-container">
            <div class="dice" id="dice1">
                <div class="face front">1</div>
                <div class="face back">6</div>
                <div class="face left">4</div>
                <div class="face right">3</div>
                <div class="face top">2</div>
                <div class="face bottom">5</div>
            </div>
            <div class="dice" id="dice2">
                <div class="face front">1</div>
                <div class="face back">6</div>
                <div class="face left">4</div>
                <div class="face right">3</div>
                <div class="face top">2</div>
                <div class="face bottom">5</div>
            </div>
            <div class="dice" id="dice3">
                <div class="face front">1</div>
                <div class="face back">6</div>
                <div class="face left">4</div>
                <div class="face right">3</div>
                <div class="face top">2</div>
                <div class="face bottom">5</div>
            </div>
        </div>
        <div class="auto-roll-container">
            <label>
                <input type="checkbox" id="autoRollCheckbox"> 自动摇
            </label>
            <input type="number" id="autoRollCount" min="1" value="1" disabled>
            次
        </div>
    </div>
    <button id="rollButton" onclick="playAudio()">开始摇骰子</button>
    </div>
    <div class="right-container">
        <div class="record-container" id="recordContainer">
            <!-- 记录将显示在这里 -->
        </div>
    </div>

    <script>
        const dice1 = document.getElementById('dice1');
        const dice2 = document.getElementById('dice2');
        const dice3 = document.getElementById('dice3');
        const rollButton = document.getElementById('rollButton');
        const recordContainer = document.getElementById('recordContainer');
        const statsGrid = document.getElementById('statsGrid');
        const autoRollCheckbox = document.getElementById('autoRollCheckbox');
        const autoRollCountInput = document.getElementById('autoRollCount');
        let autoRollInterval = null;
        let remainingRolls = 0; // 剩余自动摇骰子次数

        // 添加全局变量记录下注信息
        let betPoints = []; // 记录下注的点数
        let betSizes = [];  // 记录下注的大小（支持多选）
        let betQuads = [];  // 记录下注的四联（支持多选）
        let betAmount = 0;  // 记录下注的金额

        // 创建Audio对象
        const audio = new Audio('dice-roll.mp3');

        function playAudio() {
            // 播放音频
            audio.play();
        }

        function rollDice() {
            return Math.floor(Math.random() * 6) + 1;
        }
    
        function updateDice(diceElement, value) {
            const faces = diceElement.querySelectorAll('.face');
            
            // 更新每一面的数字
            faces[0].textContent = value; // 前面
            faces[1].textContent = 7 - value; // 后面（骰子对面之和为7）
            faces[2].textContent = value === 2 ? 3 : value === 5 ? 4 : value; // 左面
            faces[3].textContent = value === 3 ? 4 : value === 4 ? 3 : value; // 右面
            faces[4].textContent = value === 6 ? 2 : value === 1 ? 5 : value; // 上面
            faces[5].textContent = value === 1 ? 5 : value === 6 ? 2 : value; // 下面
        }
    
        function getSize(sum) {
            return sum > 10 ? '大' : '小';
        }
    
        function isTriple(dice1, dice2, dice3) {
            return dice1 === dice2 && dice2 === dice3;
        }
    
        function saveRecord(record) {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            records.push(record);
            localStorage.setItem('diceRecords', JSON.stringify(records));
        }
    
        function displayRecords() {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            recordContainer.innerHTML = '';
            records.slice(-10).forEach((record) => { // 改为过去20期
                const sortedDice = [record.dice1, record.dice2, record.dice3].sort((a, b) => a - b);
                const recordItem = document.createElement('div');
                recordItem.className = `record-item ${record.isTriple ? 'green' : record.size === '大' ? 'red' : 'yellow'}`;
                
                if (record.isTriple) {
                    // 如果是三个相同的点数，只显示点数
                    recordItem.textContent = `${sortedDice[0]}${sortedDice[1]}${sortedDice[2]}`;
                } else {
                    // 否则显示点数、和与大小
                    recordItem.textContent = `${sortedDice[0]}${sortedDice[1]}${sortedDice[2]}    ${record.sum}    ${record.size}`;
                }
                
                recordContainer.appendChild(recordItem);
            });
            recordContainer.scrollTop = recordContainer.scrollHeight;
        }
    
        function updateStats() {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            const recentRecords = records.slice(-10); // 改为过去20期
            const count = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 };

            recentRecords.forEach(record => {
                count[record.dice1]++;
                count[record.dice2]++;
                count[record.dice3]++;
            });

            statsGrid.innerHTML = `
                <div class="stats-item">1️⃣: ${count[1]}</div>
                <div class="stats-item">2️⃣: ${count[2]}</div>
                <div class="stats-item">3️⃣: ${count[3]}</div>
                <div class="stats-item">4️⃣: ${count[4]}</div>
                <div class="stats-item">5️⃣: ${count[5]}</div>
                <div class="stats-item">6️⃣: ${count[6]}</div>
            `;
        }

        // 当复选框状态改变时，启用或禁用输入框
        autoRollCheckbox.addEventListener('change', () => {
            autoRollCountInput.disabled = !autoRollCheckbox.checked;
        });

        // 单次下注
        function rollOnce() {
            rollButton.disabled = true;
            dice1.style.animation = 'roll 3s infinite';
            dice2.style.animation = 'roll 3s infinite';
            dice3.style.animation = 'roll 3s infinite';

            setTimeout(() => {
                const value1 = rollDice();
                const value2 = rollDice();
                const value3 = rollDice();
                const sum = value1 + value2 + value3;
                const sizeResult = getSize(sum); // 计算大小
                const isTripleResult = isTriple(value1, value2, value3);

                updateDice(dice1, value1);
                updateDice(dice2, value2);
                updateDice(dice3, value3);

                dice1.style.animation = '';
                dice2.style.animation = '';
                dice3.style.animation = '';

                const record = {
                    dice1: value1,
                    dice2: value2,
                    dice3: value3,
                    sum: sum,
                    size: sizeResult,
                    isTriple: isTripleResult
                };

                saveRecord(record);
                displayRecords();
                updateStats();

                // 检查是否有下注
                if (betPoints.length === 0 && betSizes.length === 0 && betQuads.length === 0) {
                    // 如果没有下注，清空 betInfo 的内容
                    document.getElementById('betPointsInfo').textContent = '';
                    document.getElementById('betSizeInfo').textContent = '';
                    document.getElementById('betQuadInfo').textContent = '';
                    document.getElementById('betTotalResultInfo').textContent = '';
                } else {
                    // 如果有下注，计算输赢结果
                    const currentBalance = parseInt(balanceAmount.textContent, 10);
                    let totalWinnings = 0; // 总赢得的金额
                    let pointsWinnings = 0; // 单点赢得的金额
                    let sizeWinnings = 0; // 大小赢得的金额
                    let quadWinnings = 0; // 四联赢得的金额

                    // 检查单点下注的输赢
                    if (betPoints.length > 0) {
                        const diceResults = [value1, value2, value3]; // 获取骰子结果

                        // 遍历每个下注的点数
                        betPoints.forEach(point => {
                            const count = diceResults.filter(result => result === parseInt(point, 10)).length; // 计算该点数在骰子结果中出现的次数

                            if (count === 1) {
                                pointsWinnings += 200; // 出现1次，每下注100，增加200
                            } else if (count === 2) {
                                pointsWinnings += 300; // 出现2次，每下注100，增加300
                            } else if (count === 3) {
                                pointsWinnings += 400; // 出现3次，每下注100，增加400
                            }
                        });
                        totalWinnings += pointsWinnings;
                    }

                    // 检查大小下注的输赢
                    if (betSizes.length > 0) {
                        betSizes.forEach(size => {
                            if (size === sizeResult) { // 如果大小和下注的大小一样
                                sizeWinnings += 600; // 每下注300，增加600
                                totalWinnings += sizeWinnings;
                            }
                        });
                    }

                    // 检查四联下注的输赢
                    if (betQuads.length > 0) {
                        betQuads.forEach(quad => {
                            const quadNumbers = quad.split('').map(Number); // 将四联选项转换为数字数组
                            const diceResults = [value1, value2, value3]; // 获取骰子结果
                    
                            // 检查骰子结果是否有重复数字
                            const hasDuplicates = new Set(diceResults).size !== diceResults.length;
                            if (hasDuplicates) {
                                return; // 有重复数字，直接返回，不中奖
                            }
                            
                            // 检查骰子结果是否包含在四联选项中的三个数字中
                            const isQuadWin = diceResults.every(result => quadNumbers.includes(result));
                    
                            if (isQuadWin) {
                                quadWinnings += 800; // 如果中奖，增加800
                                totalWinnings += quadWinnings;
                            }
                        });
                    }

                    // 更新单点下注的输赢结果
                    if (betPoints.length > 0) {
                        document.getElementById('betPointsInfo').textContent += `, 结果: ${pointsWinnings > 0 ? '+' + pointsWinnings : '0'}`;
                    }

                    // 更新大小下注的输赢结果
                    if (betSizes.length > 0) {
                        document.getElementById('betSizeInfo').textContent += `, 结果: ${sizeWinnings > 0 ? '+' + sizeWinnings : '0'}`;
                    }

                    // 更新四联下注的输赢结果
                    if (betQuads.length > 0) {
                        document.getElementById('betQuadInfo').textContent += `, 结果: ${quadWinnings > 0 ? '+' + quadWinnings : '0'}`;
                    }

                    // 计算总花费
					const totalCost = betAmount; // 总花费就是下注金额

					// 计算盈利
					const profit = totalWinnings - totalCost;

					// 更新总的输赢结果、总花费和盈利
					document.getElementById('betTotalResultInfo').textContent = `总结果: ${totalWinnings > 0 ? '+' + totalWinnings : '0'}, 总花费: -${totalCost}, 盈利: ${profit > 0 ? '+' + profit : profit}`;

                    // 更新余额
                    if (totalWinnings > 0) {
                        balanceAmount.textContent = currentBalance + totalWinnings; // 更新余额
                    }
                }

                // 清空下注信息
                betPoints = [];
                betSizes = [];
                betQuads = [];
                betAmount = 0;

                // 自动下注逻辑
                if (autoRollCheckbox.checked && remainingRolls > 0) {
                    remainingRolls--; // 减少剩余次数
                    autoRollCountInput.value = remainingRolls; // 更新输入框中的剩余次数
                    if (remainingRolls > 0) {
                        setTimeout(() => {
                            rollButton.click(); // 模拟点击摇骰子按钮
                        }, 500); // 延迟0.5秒后继续
                    } else {
                        autoRollCheckbox.checked = false; // 自动摇骰子结束，取消勾选
                        autoRollCountInput.disabled = true; // 禁用输入框
                    }
                }

                rollButton.disabled = false;
            }, 3000);
        }

        // 修改 rollButton 的点击事件
        rollButton.addEventListener('click', () => {
            if (autoRollCheckbox.checked) {
                const count = parseInt(autoRollCountInput.value, 10);
                if (count > 0) {
                    remainingRolls = count; // 设置剩余次数
                    autoRollCountInput.disabled = true; // 禁用输入框
                    rollOnce(); // 开始第一次摇骰子
                }
            } else {
                rollOnce(); // 手动摇骰子
            }
        });
    
        displayRecords();
        updateStats();
        // 获取元素
        const pointOptions = document.querySelectorAll('#pointOptions .dice-option');
        const sizeOptions = document.querySelectorAll('#sizeOptions .dice-option');
        const confirmBetButton = document.getElementById('confirmBet');
        const cancelBetButton = document.getElementById('cancelBet');
        const betModal = document.getElementById('betModal');
        const closeModal = document.querySelector('.close');
        const balanceAmount = document.getElementById('balanceAmount');
        const betInfo = document.getElementById('betInfo');
        
        // 获取四联选项
        const quadOptions = document.querySelectorAll('#quadOptions .dice-option');

        // 记录选择的四联
        let selectedQuads = []; // 支持多选

        // 选择四联
        quadOptions.forEach(option => {
            option.addEventListener('click', () => {
                const value = option.getAttribute('data-value');

                // 切换四联选择
                if (selectedQuads.includes(value)) {
                    selectedQuads = selectedQuads.filter(quad => quad !== value);
                    option.classList.remove('selected');
                } else {
                    selectedQuads.push(value);
                    option.classList.add('selected');
                }
            });
        });

        // 记录选择的点数和大小
        let selectedDice = [];
        let selectedSizes = []; // 支持多选

        // 打开弹窗
        betButton.addEventListener('click', () => {
            // 清空之前的选择
            selectedDice = [];
            selectedSizes = [];
            selectedQuads = []; // 重置四联选项
            resetDiceOptions(); // 重置选项样式
            betModal.style.display = 'block'; // 显示弹窗
        });

        // 关闭弹窗
        closeModal.addEventListener('click', () => {
            betModal.style.display = 'none';
        });

        // 取消下注
        cancelBetButton.addEventListener('click', () => {
            betModal.style.display = 'none';
        });

        // 选择点数
        pointOptions.forEach(option => {
            option.addEventListener('click', () => {
                const value = option.getAttribute('data-value');

                // 切换点数选择
                if (selectedDice.includes(value)) {
                    selectedDice = selectedDice.filter(dice => dice !== value);
                    option.classList.remove('selected');
                } else {
                    selectedDice.push(value);
                    option.classList.add('selected');
                }
            });
        });

        // 选择大小
        sizeOptions.forEach(option => {
            option.addEventListener('click', () => {
                const value = option.getAttribute('data-value');

                // 切换大小选择
                if (selectedSizes.includes(value)) {
                    selectedSizes = selectedSizes.filter(size => size !== value);
                    option.classList.remove('selected');
                } else {
                    selectedSizes.push(value);
                    option.classList.add('selected');
                }
            });
        });

        // 确认下注
        confirmBetButton.addEventListener('click', () => {
            if (selectedDice.length > 0 || selectedSizes.length > 0 || selectedQuads.length > 0) {
                // 计算总下注金额
                const pointCost = selectedDice.length * 100; // 每个点数下注100
                const sizeCost = selectedSizes.length * 300; // 每个大小下注300
                const quadCost = selectedQuads.length * 100; // 每个四联下注100
                const totalCost = pointCost + sizeCost + quadCost;

                const currentBalance = parseInt(balanceAmount.textContent, 10);

                if (currentBalance >= totalCost) {
                    balanceAmount.textContent = currentBalance - totalCost; // 扣除下注金额

                    // 更新单点下注信息
                    if (selectedDice.length > 0) {
                        document.getElementById('betPointsInfo').textContent = `单点下注: ${selectedDice.join(', ')}, 花费: -${pointCost}`;
                    } else {
                        document.getElementById('betPointsInfo').textContent = ''; // 清空单点下注信息
                    }

                    // 更新大小下注信息
                    if (selectedSizes.length > 0) {
                        document.getElementById('betSizeInfo').textContent = `大小下注: ${selectedSizes.join(', ')}, 花费: -${sizeCost}`;
                    } else {
                        document.getElementById('betSizeInfo').textContent = ''; // 清空大小下注信息
                    }

                    // 更新四联下注信息
                    if (selectedQuads.length > 0) {
                        document.getElementById('betQuadInfo').textContent = `四联下注: ${selectedQuads.join(', ')}, 花费: -${quadCost}`;
                    } else {
                        document.getElementById('betQuadInfo').textContent = ''; // 清空四联下注信息
                    }

                    // 清空输赢结果
                    document.getElementById('betTotalResultInfo').textContent = '';

                    betModal.style.display = 'none';
                    betPoints = selectedDice; // 记录下注的点数
                    betSizes = selectedSizes; // 记录下注的大小
                    betQuads = selectedQuads; // 记录下注的四联
                    betAmount = totalCost;   // 记录下注金额
                    selectedDice = [];      // 清空已选择的点数
                    selectedSizes = [];     // 清空已选择的大小
                    selectedQuads = [];     // 清空已选择的四联
                    resetDiceOptions();    // 重置点数选择界面
                } else {
                    alert('余额不足！');
                }
            } else {
                alert('请选择至少一个点数、大小或四联！');
            }
        });

        // 重置点数选项
        function resetPointOptions() {
            pointOptions.forEach(option => {
                option.classList.remove('selected');
            });
        }

        // 重置大小选项
        function resetSizeOptions() {
            sizeOptions.forEach(option => {
                option.classList.remove('selected');
            });
        }
        
        // 重置四联选项
        function resetQuadOptions() {
            quadOptions.forEach(option => {
                option.classList.remove('selected');
            });
        }

        // 重置所有选项
        function resetDiceOptions() {
            resetPointOptions();
            resetSizeOptions();
            resetQuadOptions(); // 增加重置四联选项的逻辑
        }
    </script>
</body>
</html>
