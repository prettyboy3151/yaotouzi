<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>摇骰子游戏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        .left-container {
            width: 70%;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #fff;
        }
        .stats-container {
            width: 100%;
            height: 40vh;
            padding: 10px;
            box-sizing: border-box;
            background-color: #f9f9f9;
            border-bottom: 5px solid #ccc;
        }
        .stats-container h3 {
            text-align: center;
            margin: 0 0 10px 0;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            text-align: center;
        }
        .stats-item {
            font-size: 20px;
        }
        .dice-container {
            width: 100%;
            height: 80%;
            display: grid; /* 使用 grid 布局 */
            grid-template-areas: "dice1 dice1 dice1"
		             "dice2 . dice3";
            grid-template-columns: 1fr 1fr; /* 设置两列布局 */
            grid-template-rows: 120px 100px; /* 设置自动行高 */
            justify-content: center;
            align-items: center;
            gap: 0px; /* 设置骰子之间的间距 */
            perspective: 1000px;
        }
        
        .dice {
            width: 60px;
            height: 60px;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(0deg) rotateY(0deg);
            background-color: white;
            margin: 18px;
        }
        
        #dice1 {
            grid-area: dice1; /* 设置骰子1的位置 */
            justify-self: center; /* 使骰子1靠中 */
        }
        
        #dice2 {
            grid-area: dice2; /* 设置骰子2的位置 */
            justify-self: end; /* 使骰子2靠右 */
        }
        
        #dice3 {
            grid-area: dice3; /* 设置骰子3的位置 */
            justify-self: start; /* 使骰子3靠左 */
        }
        
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            grid-column: span 2; /* 按钮跨两列 */
            justify-self: center;
        }
        .dice .face {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #00bbd4;
            border: 0px solid #ccc;
            border-radius: 0px;
            font-size: 20px;
            font-weight: bold;
            color: white;
        }
        .dice .front { transform: translateZ(30px); }
        .dice .back { transform: rotateY(180deg) translateZ(30px); }
        .dice .left { transform: rotateY(-90deg) translateZ(30px); }
        .dice .right { transform: rotateY(90deg) translateZ(30px); }
        .dice .top { transform: rotateX(90deg) translateZ(30px); }
        .dice .bottom { transform: rotateX(-90deg) translateZ(30px); }

        @keyframes roll {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            100% { transform: rotateX(720deg) rotateY(720deg); }

        }
        .right-container {
            width: 50%;
            height: 100vh;
            background-color: black;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
        }
        .record-container {
            width: 100%;
            height: calc(100vh - 60px);
            overflow-y: auto;
            font-size: 24px;  /* Increased font size for history */
        }
        .record-item {
            margin-bottom: 10px;
            padding: 5px;
        }
        .record-item.red { color: red; }
        .record-item.yellow { color: yellow; }
        .record-item.green { color: green; }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }

        .dice-image {
            width: 30px;
            height: 30px;
        }
    </style>
</head>
<body>
    <div class="left-container">
        <div class="stats-container">
            <h3>最近10次结果统计</h3>
            <div class="stats-grid" id="statsGrid">
                <!-- 统计结果将显示在这里 -->
            </div>
        </div>
        <div class="dice-container">
            <div class="dice" id="dice1">
                <div class="face front">1</div>
                <div class="face back">6</div>
                <div class="face left">4</div>
                <div class="face right">3</div>
                <div class="face top">2</div>
                <div class="face bottom">5</div>
            </div>
            <div class="dice" id="dice2">
                <div class="face front">1</div>
                <div class="face back">6</div>
                <div class="face left">4</div>
                <div class="face right">3</div>
                <div class="face top">2</div>
                <div class="face bottom">5</div>
            </div>
            <div class="dice" id="dice3">
                <div class="face front">1</div>
                <div class="face back">6</div>
                <div class="face left">4</div>
                <div class="face right">3</div>
                <div class="face top">2</div>
                <div class="face bottom">5</div>
            </div>
        </div>
        <button id="rollButton" style="width: 140px; height: 80px; border-radius: 100px; background-color: rgb(255, 193, 7)" onclick="playAudio()">开始摇骰子</button>
    </div>
    <div class="right-container">
        <div class="record-container" id="recordContainer">
            <!-- 记录将显示在这里 -->
        </div>
    </div>

    <script>
        const dice1 = document.getElementById('dice1');
        const dice2 = document.getElementById('dice2');
        const dice3 = document.getElementById('dice3');
        const rollButton = document.getElementById('rollButton');
        const recordContainer = document.getElementById('recordContainer');
        const statsGrid = document.getElementById('statsGrid');

        // 创建Audio对象
        const audio = new Audio('dice-roll.mp3');

        function playAudio() {
            // 播放音频
            audio.play();
        }
          
        function rollDice() {
            return Math.floor(Math.random() * 6) + 1;
        }
    
        function updateDice(diceElement, value) {
            const faces = diceElement.querySelectorAll('.face');
            
            // 更新每一面的数字
            faces[0].textContent = value; // 前面
            faces[1].textContent = 7 - value; // 后面（骰子对面之和为7）
            faces[2].textContent = value === 2 ? 3 : value === 5 ? 4 : value; // 左面
            faces[3].textContent = value === 3 ? 4 : value === 4 ? 3 : value; // 右面
            faces[4].textContent = value === 6 ? 2 : value === 1 ? 5 : value; // 上面
            faces[5].textContent = value === 1 ? 5 : value === 6 ? 2 : value; // 下面
        }
    
        function getSize(sum) {
            return sum > 10 ? '大' : '小';
        }
    
        function isTriple(dice1, dice2, dice3) {
            return dice1 === dice2 && dice2 === dice3;
        }
    
        function saveRecord(record) {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            records.push(record);
            localStorage.setItem('diceRecords', JSON.stringify(records));
        }
    
        function displayRecords() {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            recordContainer.innerHTML = '';
            records.slice(-10).forEach((record) => {
                const sortedDice = [record.dice1, record.dice2, record.dice3].sort((a, b) => a - b);
                const recordItem = document.createElement('div');
                recordItem.className = `record-item ${record.isTriple ? 'green' : record.size === '大' ? 'red' : 'yellow'}`;
                
                if (record.isTriple) {
                    // 如果是三个相同的点数，只显示点数
                    recordItem.textContent = `${sortedDice[0]}${sortedDice[1]}${sortedDice[2]}`;
                } else {
                    // 否则显示点数、和与大小
                    recordItem.textContent = `${sortedDice[0]}${sortedDice[1]}${sortedDice[2]}    ${record.sum}    ${record.size}`;
                }
                
                recordContainer.appendChild(recordItem);
            });
            recordContainer.scrollTop = recordContainer.scrollHeight;
        }
    
        function updateStats() {
            let records = JSON.parse(localStorage.getItem('diceRecords')) || [];
            const recentRecords = records.slice(-10);
            const count = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 };
    
            recentRecords.forEach(record => {
                count[record.dice1]++;
                count[record.dice2]++;
                count[record.dice3]++;
            });
    
            statsGrid.innerHTML = `
                <div class="stats-item">1️⃣: ${count[1]}</div>
                <div class="stats-item">2️⃣: ${count[2]}</div>
                <div class="stats-item">3️⃣: ${count[3]}</div>
                <div class="stats-item">4️⃣: ${count[4]}</div>
                <div class="stats-item">5️⃣: ${count[5]}</div>
                <div class="stats-item">6️⃣: ${count[6]}</div>
            `;
        }
    
        rollButton.addEventListener('click', () => {
            rollButton.disabled = true;
            dice1.style.animation = 'roll 3s infinite';
            dice2.style.animation = 'roll 3s infinite';
            dice3.style.animation = 'roll 3s infinite';
    
            setTimeout(() => {
                const value1 = rollDice();
                const value2 = rollDice();
                const value3 = rollDice();
                const sum = value1 + value2 + value3;
                const size = getSize(sum);
                const isTripleResult = isTriple(value1, value2, value3);
    
                updateDice(dice1, value1);
                updateDice(dice2, value2);
                updateDice(dice3, value3);
    
                dice1.style.animation = '';
                dice2.style.animation = '';
                dice3.style.animation = '';
    
                const record = {
                    dice1: value1,
                    dice2: value2,
                    dice3: value3,
                    sum: sum,
                    size: size,
                    isTriple: isTripleResult
                };
    
                saveRecord(record);
                displayRecords();
                updateStats();
    
                rollButton.disabled = false;
            }, 3000);
        });
    
        displayRecords();
        updateStats();
    </script>
</body>
</html>
